<% include ./partials/header %>

<div class="center">
    <h1>Show Page</h1>
    <h3><%= block.title %></h3>
    <div class="row">
        
        <% block.todos.forEach(function(todo) { %>
            <div class="col-lg-3 block">
            <div class="">
                <% if(todo.complete==null){ %>
                    <% if(todo.due != null){%>
                        <p>Due <%= todo.due.toDateString() %></p>
                    <% } else { %>
                        <p>Date not given, add date</p>
                        <!-- add date attribute -->
                    <% } %>
                    <li class=""><%= todo.body %></li>
                    <form action="/todo/<%= block._id %>/<%= todo._id %>/complete" method="POST">
                        <!--<label>Complete</label>-->
                        <button class="btn btn-primary btn-sm">Complete</button>
                    </form>
                <% } else { %>
                    <p>Completed <%= todo.complete.toDateString() %></p>
                    <li class="completed"><%= todo.body %></li>
                    <form action="/todo/<%= block._id %>/<%= todo._id %>?_method=DELETE" method="POST">
                        <button class="btn btn-danger btn-sm">Delete</button>
                    </form>
                <% }%>
            </div>
        </div>
        <% }); %>
        
    </div>
    <form action="/todo/<%= block._id %>/new" method="GET">
        <button>Add To Do</button>
    </form> 
    <form action="/todo">
        <button>Return to Main Page</button>
    </form>
</div>
<% include ./partials/footer %>
